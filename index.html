<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Stats Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 min-h-screen p-6">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-2xl shadow-2xl p-8">
            <div class="flex items-center gap-3 mb-8">
                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                </svg>
                <h1 class="text-3xl font-bold text-gray-800">NBA Stats Predictor</h1>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                <p class="text-sm text-blue-800">
                    <strong>Demo Mode:</strong> Using statistical models based on player profiles and historical performance patterns.
                </p>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Select Player</label>
                <div id="playerSelectContainer">
                    <select id="playerSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="">Choose a player...</option>
                    </select>
                </div>
            </div>

            <button 
                id="predictBtn"
                onclick="predictNextGame()"
                disabled
                class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2 mb-6"
            >
                Predict Next Game
            </button>

            <div id="errorContainer" style="display: none;" class="mb-6 flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span id="errorMessage"></span>
            </div>

            <div id="predictionContainer" style="display: none;"></div>
        </div>
    </div>

    <script>
        const playersData = [
            { name: 'LeBron James', team: 'LAL', type: 'allstar', pts: 25, reb: 7, ast: 8, fg3: 2 },
            { name: 'Stephen Curry', team: 'GSW', type: 'shooter', pts: 27, reb: 5, ast: 6, fg3: 5 },
            { name: 'Giannis Antetokounmpo', team: 'MIL', type: 'bigman', pts: 30, reb: 11, ast: 6, fg3: 1 },
            { name: 'Joel Embiid', team: 'PHI', type: 'bigman', pts: 33, reb: 10, ast: 4, fg3: 1 },
            { name: 'Luka Doncic', team: 'DAL', type: 'allstar', pts: 28, reb: 9, ast: 8, fg3: 3 },
            { name: 'Jayson Tatum', team: 'BOS', type: 'scorer', pts: 27, reb: 8, ast: 5, fg3: 3 },
            { name: 'Nikola Jokic', team: 'DEN', type: 'allstar', pts: 26, reb: 12, ast: 9, fg3: 1 },
            { name: 'Damian Lillard', team: 'MIL', type: 'shooter', pts: 25, reb: 4, ast: 7, fg3: 4 },
            { name: 'Anthony Davis', team: 'LAL', type: 'bigman', pts: 24, reb: 12, ast: 3, fg3: 1 },
            { name: 'Anthony Edwards', team: 'MIN', type: 'scorer', pts: 26, reb: 5, ast: 5, fg3: 3 },
            { name: 'Devin Booker', team: 'PHX', type: 'scorer', pts: 27, reb: 4, ast: 7, fg3: 3 },
            { name: 'Tyrese Haliburton', team: 'IND', type: 'playmaker', pts: 20, reb: 4, ast: 11, fg3: 3 },
            { name: 'Shai Gilgeous-Alexander', team: 'OKC', type: 'scorer', pts: 30, reb: 5, ast: 6, fg3: 2 },
            { name: 'Tyrese Maxey', team: 'PHI', type: 'scorer', pts: 26, reb: 4, ast: 7, fg3: 3 },
            { name: 'Kawhi Leonard', team: 'LAC', type: 'scorer', pts: 24, reb: 6, ast: 4, fg3: 2 },
            { name: 'Kevin Durant', team: 'PHX', type: 'scorer', pts: 27, reb: 7, ast: 5, fg3: 2 },
            { name: 'Jaylen Brown', team: 'BOS', type: 'scorer', pts: 23, reb: 6, ast: 4, fg3: 2 },
            { name: 'Scottie Barnes', team: 'TOR', type: 'allstar', pts: 19, reb: 8, ast: 6, fg3: 1 },
            { name: 'Victor Wembanyama', team: 'SAS', type: 'bigman', pts: 21, reb: 10, ast: 4, fg3: 2 },
            { name: 'Paolo Banchero', team: 'ORL', type: 'allstar', pts: 22, reb: 7, ast: 5, fg3: 1 },
            { name: 'Chet Holmgren', team: 'OKC', type: 'bigman', pts: 17, reb: 8, ast: 3, fg3: 2 },
            { name: 'Paul George', team: 'PHI', type: 'scorer', pts: 23, reb: 6, ast: 4, fg3: 3 },
            { name: 'Jaren Jackson Jr', team: 'MEM', type: 'bigman', pts: 18, reb: 6, ast: 2, fg3: 2 },
            { name: 'DeAaron Fox', team: 'SAC', type: 'scorer', pts: 26, reb: 4, ast: 6, fg3: 2 },
            { name: 'Jimmy Butler', team: 'MIA', type: 'allstar', pts: 21, reb: 5, ast: 5, fg3: 1 },
            { name: 'Alperen Sengun', team: 'HOU', type: 'bigman', pts: 19, reb: 9, ast: 5, fg3: 1 },
            { name: 'Evan Mobley', team: 'CLE', type: 'bigman', pts: 16, reb: 9, ast: 3, fg3: 1 },
            { name: 'Franz Wagner', team: 'ORL', type: 'allstar', pts: 20, reb: 5, ast: 4, fg3: 2 },
            { name: 'Domantas Sabonis', team: 'SAC', type: 'bigman', pts: 19, reb: 13, ast: 8, fg3: 0 },
            { name: 'Brandon Ingram', team: 'NOP', type: 'scorer', pts: 21, reb: 5, ast: 5, fg3: 2 },
            { name: 'DeMar DeRozan', team: 'SAC', type: 'scorer', pts: 22, reb: 4, ast: 4, fg3: 1 },
            { name: 'Jalen Williams', team: 'OKC', type: 'allstar', pts: 19, reb: 4, ast: 5, fg3: 2 },
            { name: 'Bradley Beal', team: 'PHX', type: 'scorer', pts: 18, reb: 4, ast: 5, fg3: 2 },
            { name: 'Jalen Brunson', team: 'NYK', type: 'playmaker', pts: 28, reb: 4, ast: 7, fg3: 3 },
            { name: 'Trae Young', team: 'ATL', type: 'playmaker', pts: 26, reb: 3, ast: 11, fg3: 3 },
            { name: 'Nikola Vucevic', team: 'CHI', type: 'bigman', pts: 18, reb: 10, ast: 3, fg3: 1 },
            { name: 'Darius Garland', team: 'CLE', type: 'playmaker', pts: 18, reb: 3, ast: 7, fg3: 3 },
            { name: 'Julius Randle', team: 'MIN', type: 'allstar', pts: 24, reb: 9, ast: 5, fg3: 2 },
            { name: 'Immanuel Quickley', team: 'TOR', type: 'scorer', pts: 17, reb: 3, ast: 5, fg3: 3 },
            { name: 'Donovan Mitchell', team: 'CLE', type: 'scorer', pts: 27, reb: 5, ast: 6, fg3: 4 },
            { name: 'Jalen Green', team: 'HOU', type: 'scorer', pts: 20, reb: 4, ast: 3, fg3: 2 },
            { name: 'Bam Adebayo', team: 'MIA', type: 'bigman', pts: 19, reb: 10, ast: 4, fg3: 0 },
            { name: 'DeAndre Hunter', team: 'ATL', type: 'scorer', pts: 16, reb: 4, ast: 2, fg3: 2 },
            { name: 'Jrue Holiday', team: 'BOS', type: 'allstar', pts: 13, reb: 5, ast: 5, fg3: 2 },
            { name: 'Zion Williamson', team: 'NOP', type: 'bigman', pts: 23, reb: 6, ast: 5, fg3: 0 },
            { name: 'Khris Middleton', team: 'MIL', type: 'scorer', pts: 15, reb: 4, ast: 5, fg3: 2 }
        ].sort((a, b) => a.name.localeCompare(b.name));

        const nbaTeams = ['ATL', 'BOS', 'BKN', 'CHA', 'CHI', 'CLE', 'DAL', 'DEN', 'DET', 'GSW', 'HOU', 'IND', 'LAC', 'LAL', 'MEM', 'MIA', 'MIL', 'MIN', 'NOP', 'NYK', 'OKC', 'ORL', 'PHI', 'PHX', 'POR', 'SAC', 'SAS', 'TOR', 'UTA', 'WAS'];

        let selectedPlayer = null;

        // Initialize
        const select = document.getElementById('playerSelect');
        playersData.forEach((player, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = `${player.name} (${player.team})`;
            select.appendChild(option);
        });

        select.onchange = (e) => {
            selectedPlayer = e.target.value ? playersData[e.target.value] : null;
            document.getElementById('predictBtn').disabled = !selectedPlayer;
        };

        function generateGameStats(player) {
            const games = [];
            const variance = 0.25; // 25% variance
            
            for (let i = 0; i < 20; i++) {
                const random = () => 0.75 + Math.random() * 0.5; // 0.75 to 1.25
                games.push({
                    pts: Math.max(0, Math.round(player.pts * random())),
                    reb: Math.max(0, Math.round(player.reb * random())),
                    ast: Math.max(0, Math.round(player.ast * random())),
                    fg3m: Math.max(0, Math.round(player.fg3 * random()))
                });
            }
            return games;
        }

        function calculateStats(games) {
            const calculate = (arr) => {
                const mean = arr.reduce((a, b) => a + b, 0) / arr.length;
                const variance = arr.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / arr.length;
                const stdDev = Math.sqrt(variance);
                return { mean: mean.toFixed(1), stdDev: stdDev.toFixed(1) };
            };

            return {
                points: calculate(games.map(g => g.pts)),
                rebounds: calculate(games.map(g => g.reb)),
                assists: calculate(games.map(g => g.ast)),
                threes: calculate(games.map(g => g.fg3m)),
                gamesAnalyzed: games.length
            };
        }

        function predictNextGame() {
            if (!selectedPlayer) return;

            const btn = document.getElementById('predictBtn');
            btn.disabled = true;
            btn.innerHTML = '<div class="spinner"></div><span>Analyzing...</span>';
            
            document.getElementById('errorContainer').style.display = 'none';
            document.getElementById('predictionContainer').style.display = 'none';

            setTimeout(() => {
                const games = generateGameStats(selectedPlayer);
                const stats = calculateStats(games);
                
                const today = new Date();
                const lastGameDate = new Date(today);
                lastGameDate.setDate(lastGameDate.getDate() - Math.floor(Math.random() * 3) - 1);
                
                const isBackToBack = Math.random() > 0.7;
                const nextGameDate = new Date(lastGameDate);
                nextGameDate.setDate(nextGameDate.getDate() + (isBackToBack ? 1 : Math.floor(Math.random() * 3) + 2));
                
                const otherTeams = nbaTeams.filter(t => t !== selectedPlayer.team);
                const opponent = otherTeams[Math.floor(Math.random() * otherTeams.length)];
                const isHome = Math.random() > 0.5;
                const defenseRank = Math.floor(Math.random() * 30) + 1;

                renderPrediction({
                    playerName: selectedPlayer.name,
                    stats,
                    isBackToBack,
                    lastGameDate: lastGameDate.toLocaleDateString(),
                    nextGameDate: nextGameDate.toLocaleDateString(),
                    opponent,
                    isHome,
                    defenseRank,
                    isTop5Defense: defenseRank <= 5,
                    isBottom5Defense: defenseRank >= 26
                });

                btn.disabled = false;
                btn.innerHTML = 'Predict Next Game';
            }, 800);
        }

        function renderPrediction(prediction) {
            const container = document.getElementById('predictionContainer');
            container.style.display = 'block';
            
            container.innerHTML = `
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">${prediction.playerName}</h2>
                        <div class="flex items-center gap-2 text-sm text-gray-600 mb-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span>Last Game: ${prediction.lastGameDate}</span>
                            <span class="mx-2">•</span>
                            <span>Next Game: ${prediction.nextGameDate}</span>
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-700 font-medium">
                            <span class="${prediction.isHome ? 'text-green-700' : 'text-blue-700'}">
                                ${prediction.isHome ? 'vs' : '@'} ${prediction.opponent}
                            </span>
                            <span class="text-gray-400">•</span>
                            <span class="text-gray-600">${prediction.isHome ? 'Home' : 'Away'}</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">Based on ${prediction.stats.gamesAnalyzed} games this season</p>
                    </div>

                    ${prediction.isBackToBack ? `
                        <div class="flex items-center gap-2 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="font-semibold">Back-to-Back Alert: Next game is within 1 day of previous game</span>
                        </div>
                    ` : ''}

                    ${prediction.isTop5Defense ? `
                        <div class="flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="font-semibold">Tough Matchup: Opponent ranks #${prediction.defenseRank} in defense (Top 5)</span>
                        </div>
                    ` : ''}

                    ${prediction.isBottom5Defense ? `
                        <div class="flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="font-semibold">Favorable Matchup: Opponent ranks #${prediction.defenseRank} in defense (Bottom 5)</span>
                        </div>
                    ` : ''}

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${renderStatCard('Points', prediction.stats.points, 'bg-orange-500')}
                        ${renderStatCard('Rebounds', prediction.stats.rebounds, 'bg-green-500')}
                        ${renderStatCard('Assists', prediction.stats.assists, 'bg-blue-500')}
                        ${renderStatCard('3-Pointers Made', prediction.stats.threes, 'bg-purple-500')}
                    </div>
                </div>
            `;
        }

        function renderStatCard(label, stat, color) {
            return `
                <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-center gap-2 mb-3">
                        <div class="w-3 h-3 rounded-full ${color}"></div>
                        <h3 class="text-sm font-medium text-gray-600">${label}</h3>
                    </div>
                    <div class="space-y-2">
                        <div>
                            <p class="text-3xl font-bold text-gray-800">${stat.mean}</p>
                            <p class="text-xs text-gray-500">Predicted Average</p>
                        </div>
                        <div class="pt-2 border-t border-gray-100">
                            <p class="text-lg font-semibold text-gray-700">± ${stat.stdDev}</p>
                            <p class="text-xs text-gray-500">Standard Deviation</p>
                        </div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
